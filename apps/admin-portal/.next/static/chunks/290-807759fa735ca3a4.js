"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[290],{5255:(e,t,s)=>{s.d(t,{SQ:()=>l,_2:()=>c,mB:()=>u,rI:()=>i,ty:()=>n});var a=s(20912),r=s(34012),o=s(91091),d=s(87343);let i=o.bL,n=o.l9;o.YJ,o.ZL,o.Pb,o.z6,r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsx)(o.ZP,{ref:t,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s),...i,children:r})}).displayName=o.ZP.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=o.G5.displayName;let l=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...i}=e;return(0,a.jsx)(o.ZL,{children:(0,a.jsx)(o.UC,{ref:t,sideOffset:r,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})});l.displayName=o.UC.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r})});c.displayName=o.q7.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});u.displayName=o.wv.displayName},21856:(e,t,s)=>{s.d(t,{Wu:()=>n,ZB:()=>i,Zp:()=>o,aR:()=>d});var a=s(20912);s(34012);var r=s(87343);function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}},29083:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(20912),r=s(34012),o=s(87343),d=s(15951),i=s(65988),n=s(37753);function l(e){let{msg:t="You don't have access to this page."}=e;return(0,a.jsx)("div",{className:"m-6 rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:t})}function c(e){let{screen:t,mode:s="soft",className:c,children:u,unauthorizedMsg:m="You don't have access to this page. Please go back"}=e,{allowed:p}=function(e){var t;let s=(0,d.usePathname)(),a=null!=(t=null!=e?e:s)?t:"/",r=i.q[a];return{allowed:!r||(0,n.T)(r),required:null!=r?r:null,routeKey:a}}(t),[f,h]=r.useState(!1);return(r.useEffect(()=>h(!0),[]),f)?p?(0,a.jsx)(a.Fragment,{children:u}):"block"===s?(0,a.jsx)("div",{className:(0,o.cn)("relative",c),children:(0,a.jsx)(l,{msg:m})}):(0,a.jsxs)("div",{className:(0,o.cn)("relative",c),children:[(0,a.jsx)(l,{msg:m}),(0,a.jsxs)("div",{className:"relative",children:[u,(0,a.jsx)("div",{"aria-hidden":!0,className:"pointer-events-auto fixed inset-0 z-40",onClick:e=>e.stopPropagation()})]}),(0,a.jsx)("div",{className:"pointer-events-none fixed inset-0 z-30 bg-transparent"})]}):null}},37753:(e,t,s)=>{s.d(t,{T:()=>r});var a=s(74764);function r(e){let{hasPermission:t}=function(){var e,t;let{data:s,status:r}=(0,a.wV)(),o=null!=s?s:null;return{user:null!=(e=null==o?void 0:o.user)?e:null,permissions:null!=(t=null==o?void 0:o.permissions)?t:[],loading:"loading"===r,hasPermission:e=>!!(null==o?void 0:o.permissions)&&o.permissions.some(t=>{var s;return null==(s=t.permissions)?void 0:s.some(t=>t.is_allowed&&(t.route===e||e.startsWith(t.route)))}),getMenuPermissions:()=>{if(!(null==o?void 0:o.permissions))return[];let e=[];return o.permissions.forEach(t=>{var s;let a=(null!=(s=t.permissions)?s:[]).filter(e=>e.is_Show_in_menu&&e.is_allowed);a.length&&e.push({module_name:t.module_name,module_slug:t.module_slug,permissions:a})}),e}}}();return t(e)}},38272:(e,t,s)=>{s.d(t,{J:()=>d});var a=s(20912),r=s(34012),o=s(87343);let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("label",{ref:t,className:(0,o.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...r})});d.displayName="Label"},43239:(e,t,s)=>{s.d(t,{A:()=>m});var a=s(89413),r=s(16143),o=s(74764);let d=a.A.create({baseURL:"http://localhost:3000",headers:{"Content-Type":"application/json"}}),i=!1,n=[],l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.forEach(s=>{e?s.reject(e):s.resolve(t)}),n=[]};async function c(){try{let e=await (0,o.Ht)();if(null==e?void 0:e.accessToken)return e.accessToken}catch(e){console.log("[api] Error getting session:",e)}let e=r.A.get("access_token");return e||null}function u(){try{r.A.remove("access_token",{path:"/"}),r.A.remove("refresh_token",{path:"/"}),localStorage.removeItem("user"),localStorage.removeItem("permissions"),window.location.href="/login"}catch(e){console.error("[api] failed to clear auth:",e)}}console.log("[api] baseURL =",d.defaults.baseURL),d.interceptors.request.use(async e=>{let t=await c();if(t){var s;e.headers=null!=(s=e.headers)?s:{},e.headers.Authorization="Bearer ".concat(t)}return e},e=>Promise.reject(e)),d.interceptors.response.use(e=>e,async e=>{var t,s,a,o,c,m;let p=e.config,f=(null!=(o=null==e||null==(t=e.config)?void 0:t.baseURL)?o:"")+(null!=(c=null==e||null==(s=e.config)?void 0:s.url)?c:"");if((null==e||null==(a=e.response)?void 0:a.status)===401&&!p._retry){if(f.includes("/auth/login")||f.includes("/auth/refresh"))return Promise.reject(e);let t=r.A.get("refresh_token");if(!t)return u(),Promise.reject(e);if(i)return new Promise((e,t)=>{n.push({resolve:e,reject:t})}).then(e=>(e&&p.headers&&(p.headers.Authorization="Bearer ".concat(e)),d(p))).catch(e=>Promise.reject(e));p._retry=!0,i=!0;try{let{data:e}=await d.post("/auth/refresh",{refresh_token:t});if((null==e?void 0:e.status)&&(null==e||null==(m=e.data)?void 0:m.token)){let t=e.data.token,s=function(e){if(!e)return;let t=new Date(e);if(!isNaN(t.getTime())&&!(t.getTime()<=Date.now()))return t}(e.data.expires_at),a={secure:!0,sameSite:"strict",path:"/"};return s&&(a.expires=s),r.A.set("access_token",t,a),e.data.refresh_token&&r.A.set("refresh_token",e.data.refresh_token,{expires:7,secure:!0,sameSite:"strict",path:"/"}),p.headers&&(p.headers.Authorization="Bearer ".concat(t)),l(null,t),i=!1,d(p)}throw Error("Invalid refresh response structure")}catch(e){return l(e,null),i=!1,u(),Promise.reject(e)}}return Promise.reject(e)});let m=d},45082:(e,t,s)=>{s.d(t,{p:()=>d});var a=s(20912),r=s(34012),o=s(87343);let d=r.forwardRef((e,t)=>{let{className:s,type:r,...d}=e;return(0,a.jsx)("input",{type:r,className:(0,o.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...d})});d.displayName="Input"},52062:(e,t,s)=>{s.d(t,{Cf:()=>c,Es:()=>m,L3:()=>p,c7:()=>u,lG:()=>i,rr:()=>f});var a=s(20912);s(34012);var r=s(83130),o=s(69982),d=s(87343);function i(e){let{...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"dialog",...t})}function n(e){let{...t}=e;return(0,a.jsx)(r.ZL,{"data-slot":"dialog-portal",...t})}function l(e){let{className:t,...s}=e;return(0,a.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,d.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function c(e){let{className:t,children:s,showCloseButton:i=!0,...c}=e;return(0,a.jsxs)(n,{"data-slot":"dialog-portal",children:[(0,a.jsx)(l,{}),(0,a.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,d.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...c,children:[s,i&&(0,a.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(o.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,d.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,d.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function p(e){let{className:t,...s}=e;return(0,a.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,d.cn)("text-lg leading-none font-semibold",t),...s})}function f(e){let{className:t,...s}=e;return(0,a.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,d.cn)("text-muted-foreground text-sm",t),...s})}},65988:(e,t,s)=>{s.d(t,{c:()=>a,q:()=>r});let a={modules:{list:"modules/getAll",create:"modules/create",read:"modules/getById",update:"modules/update",delete:"modules/delete"},permissions:{list:"permissions/getAll",create:"permissions/create",read:"permissions/getById",update:"permissions/update",delete:"permissions/delete"},roles:{list:"roles/getAll",create:"roles/create",read:"roles/getById",update:"roles/update",delete:"roles/delete",extras:{getRolePerms:"roles/getAllPermissionsByRoleId",updateRolePerms:"roles/updatePermissionsAccessByRoleId"}},users:{list:"users/getAll",create:"users/create",read:"users/getById",update:"users/update",delete:"users/delete"},taxes:{list:"taxes/getAll",create:"taxes/create",read:"taxes/getById",update:"taxes/update",delete:"taxes/delete"},jobFiles:{list:"job_files/getAll",create:"job_files/create",read:"job_files/getById",update:"job_files/update",delete:"job_files/delete"},products:{list:"products/getAll",create:"products/create",read:"products/getById",update:"products/update",delete:"products/delete"},clients:{list:"clients/getAll",create:"clients/create",read:"clients/getById",update:"clients/update",delete:"clients/delete"},quotations:{list:"quotations/getAll",create:"quotations/create",read:"quotations/getById",update:"quotations/update",delete:"quotations/delete"},invoices:{list:"invoices/getAll",create:"invoices/create",read:"invoices/getById",update:"invoices/update",delete:"invoices/delete"}},r={"/dashboard/modules":a.modules.list,"/dashboard/modules/create":a.modules.create,"/dashboard/modules/[id]":a.modules.read,"/dashboard/modules/[id]/edit":a.modules.update,"/dashboard/permissions":a.permissions.list,"/dashboard/permissions/create":a.permissions.create,"/dashboard/permissions/[id]":a.permissions.read,"/dashboard/permissions/[id]/edit":a.permissions.update,"/dashboard/roles":a.roles.list,"/dashboard/roles/create":a.roles.create,"/dashboard/roles/[id]":a.roles.read,"/dashboard/roles/[id]/edit":a.roles.update,"/dashboard/roles/[id]/permissions":a.roles.extras.getRolePerms,"/dashboard/roles/[id]/permissions/edit":a.roles.extras.updateRolePerms,"/dashboard/users":a.users.list,"/dashboard/users/create":a.users.create,"/dashboard/users/[id]":a.users.read,"/dashboard/users/[id]/edit":a.users.update,"/dashboard/tax":a.taxes.list,"/dashboard/tax/create":a.taxes.create,"/dashboard/tax/[id]":a.taxes.read,"/dashboard/tax/[id]/edit":a.taxes.update,"/dashboard/jobFiles":a.jobFiles.list,"/dashboard/jobFiles/create":a.jobFiles.create,"/dashboard/jobFiles/[id]":a.jobFiles.read,"/dashboard/jobFiles/[id]/edit":a.jobFiles.update,"/dashboard/products":a.products.list,"/dashboard/products/create":a.products.create,"/dashboard/products/[id]":a.products.read,"/dashboard/products/[id]/edit":a.products.update,"/dashboard/clients":a.clients.list,"/dashboard/clients/create":a.clients.create,"/dashboard/clients/[id]":a.clients.read,"/dashboard/clients/[id]/edit":a.clients.update,"/dashboard/quotations":a.quotations.list,"/dashboard/quotations/new":a.quotations.create,"/dashboard/quotations/[id]":a.quotations.read,"/dashboard/quotations/[id]/edit":a.quotations.update,"/dashboard/invoices":a.invoices.list,"/dashboard/invoices/new":a.invoices.create,"/dashboard/invoices/[id]":a.invoices.read,"/dashboard/invoices/[id]/edit":a.invoices.update}},87343:(e,t,s)=>{s.d(t,{cn:()=>o});var a=s(52886),r=s(12820);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},95370:(e,t,s)=>{s.d(t,{$:()=>n});var a=s(20912),r=s(34012),o=s(34248),d=s(87343);let i=(0,o.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),n=r.forwardRef((e,t)=>{let{className:s,variant:r,size:o,...n}=e;return(0,a.jsx)("button",{className:(0,d.cn)(i({variant:r,size:o,className:s})),ref:t,...n})});n.displayName="Button"}}]);